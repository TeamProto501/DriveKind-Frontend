import{c as w,a as n,f as H,s as U}from"./BOZPY13N.js";import{p as I,f as y,v as Y,a as M,af as ee,d as W,J as ae,a5 as X,b as L,g as e,u as te,c as v,n as O,r as c,s as E,t as Q,ag as re,ah as se,I as ne,y as B}from"./4aDsAy4W.js";import{I as z,s as G,g as oe,H as le,p as ie,e as ce,i as de}from"./B4vlcJ1Q.js";import{i as P}from"./BVWxLK3S.js";import{g as ve}from"./DOOBv4HI.js";import{s as J,r as T,a as fe,b as ue}from"./CUDZi8fW.js";import{i as me}from"./DToE_00X.js";import{c as pe}from"./Cnk5pdOU.js";function he(m,a){I(a,!0);/**
 * @license @lucide/svelte v0.542.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let s=T(a,["$$slots","$$events","$$legacy"]);const d=[["path",{d:"m9 18 6-6-6-6"}]];z(m,J({name:"chevron-right"},()=>s,{get iconNode(){return d},children:(o,p)=>{var l=w(),f=y(l);G(f,()=>a.children??Y),n(o,l)},$$slots:{default:!0}})),M()}function ge(m,a){I(a,!0);/**
 * @license @lucide/svelte v0.542.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let s=T(a,["$$slots","$$events","$$legacy"]);const d=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];z(m,J({name:"loader-circle"},()=>s,{get iconNode(){return d},children:(o,p)=>{var l=w(),f=y(l);G(f,()=>a.children??Y),n(o,l)},$$slots:{default:!0}})),M()}function xe(m,a){I(a,!0);/**
 * @license @lucide/svelte v0.542.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let s=T(a,["$$slots","$$events","$$legacy"]);const d=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"}]];z(m,J({name:"shield"},()=>s,{get iconNode(){return d},children:(o,p)=>{var l=w(),f=y(l);G(f,()=>a.children??Y),n(o,l)},$$slots:{default:!0}})),M()}function _e(m,a){I(a,!0);/**
 * @license @lucide/svelte v0.542.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let s=T(a,["$$slots","$$events","$$legacy"]);const d=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]];z(m,J({name:"triangle-alert"},()=>s,{get iconNode(){return d},children:(o,p)=>{var l=w(),f=y(l);G(f,()=>a.children??Y),n(o,l)},$$slots:{default:!0}})),M()}var be=H('<div class="min-h-screen flex items-center justify-center"><div class="text-center"><!> <p class="text-gray-600">Checking permissions...</p></div></div>'),ye=H('<div class="min-h-screen flex items-center justify-center"><div class="text-center"><!> <h2 class="text-xl font-semibold text-gray-900 mb-2">Authentication Required</h2> <p class="text-gray-600 mb-4">Please sign in to access this page.</p> <a href="/login" class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200">Sign In</a></div></div>'),$e=H('<div class="min-h-screen flex items-center justify-center"><div class="text-center"><!> <h2 class="text-xl font-semibold text-gray-900 mb-2">Access Denied</h2> <p class="text-gray-600 mb-4"> </p> <p class="text-sm text-gray-500 mb-4"> </p> <a href="/" class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200">Go Home</a></div></div>');function ke(m,a){I(a,!0);const s=ee("session");let d=W(ae([])),o=W(!0);const p=te(()=>a.requiredRoles.some(t=>e(d).includes(t)));X(()=>{s!=null&&s.user?l():L(o,!1)});async function l(){try{L(d,["Admin","Dispatcher"],!0)}catch(t){console.error("Error loading user roles:",t)}finally{L(o,!1)}}X(()=>{if(!e(o)&&!e(p)&&(s!=null&&s.user)){const t=oe(e(d));ve(t)}});var f=w(),V=y(f);{var F=t=>{var u=be(),x=v(u),N=v(x);ge(N,{class:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),O(2),c(x),c(u),n(t,u)},q=t=>{var u=w(),x=y(u);{var N=_=>{var h=ye(),b=v(h),k=v(b);xe(k,{class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),O(6),c(b),c(h),n(_,h)},r=_=>{var h=w(),b=y(h);{var k=j=>{var A=$e(),i=v(A),g=v(i);_e(g,{class:"w-16 h-16 text-red-400 mx-auto mb-4"});var $=E(g,4),D=v($);c($);var C=E($,2),S=v(C);c(C),O(2),c(i),c(A),Q((R,Z)=>{U(D,`You don't have permission to access this page. Required roles: ${R??""}`),U(S,`Your current roles: ${Z??""}`)},[()=>a.requiredRoles.join(", "),()=>e(d).join(", ")]),n(j,A)},K=j=>{var A=w(),i=y(A);G(i,()=>a.children),n(j,A)};P(b,j=>{e(p)?j(K,!1):j(k)},!0)}n(_,h)};P(x,_=>{s?_(r,!1):_(N)},!0)}n(t,u)};P(V,t=>{e(o)?t(F):t(q,!1)})}n(m,f),M()}var Re=H('<a class="flex items-center space-x-1 text-sm text-gray-600 hover:text-gray-900 transition-colors duration-200"><!> <span> </span></a>'),we=H('<span class="flex items-center space-x-1 text-sm font-medium text-gray-900"><!> <span> </span></span>'),Ne=H("<!> <!>",1),je=H('<nav class="bg-gray-50 border-b border-gray-200"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex items-center space-x-2 py-3"></div></div></nav>');function De(m,a){I(a,!1);const[s,d]=fe(),o=()=>ue(ie,"$page",s),p=ne();function l(q){const t=q.split("/").filter(Boolean),u=[{label:"Home",href:"/",icon:le}];let x="";return t.forEach((N,r)=>{x+=`/${N}`;const _=N.split("-").map(b=>b.charAt(0).toUpperCase()+b.slice(1)).join(" "),h=r===t.length-1?void 0:x;u.push({label:_,href:h})}),u}re(()=>o(),()=>{L(p,l(o().url.pathname))}),se(),me();var f=w(),V=y(f);{var F=q=>{var t=je(),u=v(t),x=v(u);ce(x,5,()=>e(p),de,(N,r,_)=>{var h=Ne(),b=y(h);{var k=i=>{he(i,{class:"w-4 h-4 text-gray-400"})};P(b,i=>{_>0&&i(k)})}var K=E(b,2);{var j=i=>{var g=Re(),$=v(g);{var D=R=>{e(r).icon(R,{class:"w-4 h-4"})};P($,R=>{e(r),B(()=>e(r).icon)&&R(D)})}var C=E($,2),S=v(C,!0);c(C),c(g),Q(()=>{pe(g,"href",(e(r),B(()=>e(r).href))),U(S,(e(r),B(()=>e(r).label)))}),n(i,g)},A=i=>{var g=we(),$=v(g);{var D=R=>{e(r).icon(R,{class:"w-4 h-4"})};P($,R=>{e(r),B(()=>e(r).icon)&&R(D)})}var C=E($,2),S=v(C,!0);c(C),c(g),Q(()=>U(S,(e(r),B(()=>e(r).label)))),n(i,g)};P(K,i=>{e(r),B(()=>e(r).href)?i(j):i(A,!1)})}n(N,h)}),c(x),c(u),c(t),n(q,t)};P(V,q=>{e(p),B(()=>e(p).length>1)&&q(F)})}n(m,f),M(),d()}export{De as B,ke as R,xe as S};
